name: Build eth-node-nethermind on debian 12

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main     
    paths:
      - 'debian-12/eth-node-nethermind/1.21.1-1/**'  

jobs:
  install_pkgbuilder_deps:
    uses: ./.github/workflows/pkgbuilder-deps.yml
  package_eth_node_nethermind_debian12:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Create env
        run: pkg-builder build-env create debian-12/eth-node-nethermind/1.21.1-1/pkg-builder.toml

      - name: Create package
        run: pkg-builder package debian-12/eth-node-nethermind/1.21.1-1/pkg-builder.toml